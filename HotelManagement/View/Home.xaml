<UserControl x:Class="HotelManagement.View.Home"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
xmlns:wpf="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf" xmlns:viewmodel="clr-namespace:HotelManagement.ViewModel"
             xmlns:uti="clr-namespace:HotelManagement.Utilities" xmlns:fa="http://schemas.fontawesome.io/icons/"
             mc:Ignorable="d"
  d:DesignHeight="630" d:DesignWidth="1010"
  Background="Transparent" Width="1010" Height="638" >


    <UserControl.Resources>
        <uti:BooleanToVisibilityConverter x:Key="InvertVisibilityConverter"
                                       True="Hidden"
                                       False="Visible" />
        <BooleanToVisibilityConverter x:Key="VisibilityConverter" />

    </UserControl.Resources>


    <Grid>
        
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Độ cao tự động cho phần Overview -->
            <RowDefinition Height="*"/>
           
        </Grid.RowDefinitions>

        
        <Grid Background="#FFF" Margin="0,-4,0,4" Grid.Row="0">
            

            <TextBlock
                       Margin="40,10,0,10"
                Text="Overview"
                       FontSize="32"
                       Foreground="#373434"
                       HorizontalAlignment="Left"
                       FontWeight="Bold" />
        </Grid>

        <fa:ImageAwesome Grid.Row="1" Icon="Spinner" Spin="{Binding IsLoading}"
                 Visibility="{Binding Path=IsLoading, Converter={StaticResource VisibilityConverter}}"
                 Height="48" Width="48" />


        <ScrollViewer Grid.Row="1" Visibility="{Binding Path=IsLoading, Converter={StaticResource InvertVisibilityConverter}}" VerticalScrollBarVisibility="Visible">
                <Grid Background="#FFF" Margin="0,-4,0,4">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="120" />
                        <RowDefinition Height="291*" />
                        <RowDefinition Height="241*" />
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        
                    </Grid.ColumnDefinitions>


                

                    <StackPanel  Orientation="Horizontal" Grid.ColumnSpan="3">
                    <Border CornerRadius="12" Height="100" Width="160" Margin="50,5,0,5"
  Background="#E8EFFF">
                        <Grid >
                            <StackPanel HorizontalAlignment="Left" Margin="10,0,0,0">
                                <ui:SymbolIcon Symbol="Money16" FontSize="45" HorizontalAlignment="Left"/>
                                <TextBlock Foreground="#747474">
        Today's revenue
                                </TextBlock>
                                <TextBlock Text="{Binding HomeData.TotalRevenueToday}"
HorizontalAlignment="Center"
FontSize="22"
Foreground="#373434"
FontWeight="Bold" />
                            </StackPanel>

                        </Grid >
                    </Border>

                    <Border CornerRadius="12" Height="100" Width="160" Margin="40,0,0,0"
Background="#E4ffe0">
                        <Grid>
                            <StackPanel HorizontalAlignment="Left" Margin="10,0,0,0">
                                <ui:SymbolIcon Symbol="CalendarRtl12" FontSize="40" HorizontalAlignment="Left"/>
                                <TextBlock Margin="0,4,0,0"
                                    Foreground="#747474">
      Today's booking
                                </TextBlock>
                                <TextBlock Text="{Binding HomeData.TotalBookingToday}"
HorizontalAlignment="Center"
FontSize="22"
Foreground="#373434"
FontWeight="Bold" />
                            </StackPanel>

                        </Grid >
                    </Border>

                    <Border CornerRadius="12" Height="100" Width="160" Margin="40,0,0,0"
Background="#FFFCE0">
                        <Grid>
                            <StackPanel HorizontalAlignment="Left" Margin="10,0,0,0">
                                <ui:SymbolIcon Symbol="Money16" FontSize="45" HorizontalAlignment="Left"/>
                                <TextBlock Foreground="#747474">
    Check-in
                                </TextBlock>
                                <TextBlock Text="{Binding HomeData.TotalCheckinToday}"
HorizontalAlignment="Center"
FontSize="22"
Foreground="#373434"
FontWeight="Bold" />
                            </StackPanel>

                        </Grid >
                    </Border>

                    <Border CornerRadius="12" Height="100" Width="160" Margin="40,0,0,0"
Background="#E8EFFF" >
                        <Grid >
                            <StackPanel HorizontalAlignment="Left" Margin="10,0,0,0">
                                <ui:SymbolIcon Symbol="Money16" FontSize="45" HorizontalAlignment="Left"/>
                                <TextBlock Foreground="#747474">
      Check-out
                                </TextBlock>
                                <TextBlock Text="{Binding HomeData.TotalCheckoutToday}"
HorizontalAlignment="Center"
FontSize="22"
Foreground="#373434"
FontWeight="Bold" />
                            </StackPanel>

                        </Grid >
                    </Border>
               

            </StackPanel>
                <GridSplitter Grid.Row="0" 
                Margin="0,0,0,2"
                Grid.ColumnSpan="3"
   Height="2"
   Width="950"
                
   VerticalAlignment="Bottom">

                </GridSplitter>
                <Border Grid.Row="1"  Margin="50,10,0,0"
                        BorderThickness="4" CornerRadius="20"
                        BorderBrush="LightGray">
                    <StackPanel Margin="0,0,0,0" Grid.Row="0">
                        <Border Background="#FFF" CornerRadius="10">
                            <StackPanel Margin="20">
                                <TextBlock  Foreground="#373434"
                                    Text="Recent Booking" FontSize="22" FontWeight="Bold" />

                                <ItemsControl ItemsSource="{Binding RecentBookings}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Margin="5" Padding="10" Background="#E6E6E6" CornerRadius="5" BorderBrush="Gray" BorderThickness="1">
                                                <Grid >
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="0.5*" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="{Binding RoomType}"
                                                                   FontWeight="Bold"
                                                                   FontSize="15"/>
                                                        <TextBlock Text="{Binding RoomNumber}" 
                                                                   FontSize="15" FontWeight="Bold" />
                                                    </StackPanel>
                                                    <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                                        <TextBlock FontSize="15"
                                                                   Text="{Binding CustomerName}" />
                                                        <TextBlock FontSize="15"
                                                                   Text="{Binding BookingDate, StringFormat='dd/MM/yyyy - hh:mm tt'}" />
                                                    </StackPanel>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>





                            </StackPanel>
                        </Border>


                    </StackPanel>
                </Border>
               
                <GridSplitter Grid.Row="1" 
                              Height="2"
                              VerticalAlignment="Top">
                    
                </GridSplitter>
            <Grid Grid.Row="1" Grid.Column="1">
                    <TextBlock
                        Margin="30"
                        Text="Room Status" 
                        FontSize="22" 
                        Panel.ZIndex="2" 
                         Foreground="#373434"
                        FontWeight="Bold" />
                    <wpf:PieChart 
LegendLocation="Bottom" Height="260" Margin="0,20,0,0"
                          Hoverable="False"  DataClick="PieChart_DataClick_1"
                          Foreground="Black"
                Series="{Binding PieSeriesCollection}"/>
            </Grid>
                <GridSplitter Grid.Row="2" 
                              Margin="0,0,0,0"
                              Grid.ColumnSpan="3"
                 Height="2"
                 Width="950"
                              
                 VerticalAlignment="Top">

                </GridSplitter>
                <Border Grid.Row="3"  
                        
                        Margin="50,10,0,0"
BorderThickness="4" CornerRadius="20"
BorderBrush="LightGray">
                    <Grid Margin="20,10,20,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="40"/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>

                        </Grid.RowDefinitions>

                        <TextBlock Text="Total"
               FontSize="22"
               Foreground="#373434"
               HorizontalAlignment="Left"
                     
               FontWeight="Bold" />
                        <GridSplitter Grid.Row="0" Height="2" IsEnabled="False" VerticalAlignment="Top"
      Width="910"
      HorizontalAlignment="Left" Margin="0,0,0,0" />
                        <StackPanel Grid.Row="1" Margin="0,0,0,0" Grid.RowSpan="2"
                       >
                            <TextBlock Text="{Binding HomeData.TotalRevenue, StringFormat='{}{0:0}$'}"
           HorizontalAlignment="Center"
           FontSize="22"
           Foreground="#373434"
           FontWeight="Bold" />

                            <TextBlock Foreground="#747474"
                           FontSize="16"
                             HorizontalAlignment="Center">
     Revenue
                            </TextBlock>

                        </StackPanel>
                        <StackPanel Grid.Row="1" Grid.Column="1"
                   >
                            <TextBlock Text="{Binding HomeData.TotalBooking}"
                         HorizontalAlignment="Center"
FontSize="22"
Foreground="#373434"
FontWeight="Bold" />
                            <TextBlock Foreground="#747474"
                       FontSize="16"
                         HorizontalAlignment="Center">
  Booking
                            </TextBlock>

                        </StackPanel>
                        <StackPanel Grid.Row="1" Margin="0,50,4,50" Grid.RowSpan="3"
                   >
                            <TextBlock Text="{Binding HomeData.TotalRoom}"
                         HorizontalAlignment="Center"
FontSize="22"
Foreground="#373434"
FontWeight="Bold" />
                            <TextBlock Foreground="#747474"
                       FontSize="16"
                         HorizontalAlignment="Center">
             Room
                            </TextBlock>

                        </StackPanel>
                        <StackPanel Grid.Row="2" Grid.Column="2"
                   >
                            <TextBlock Text="{Binding HomeData.TotalStaff}"
                         HorizontalAlignment="Center"
FontSize="22"
Foreground="#373434"
FontWeight="Bold" />
                            <TextBlock Foreground="#747474"
                       FontSize="16"
                         HorizontalAlignment="Center">
  Staff
                            </TextBlock>

                        </StackPanel>
                        <ui:Button Grid.Row="3" Grid.Column="2"
                Appearance="Dark"
               Background="#4F4A4A"
               PressedBackground="#4F4A4A"
               MouseOverBackground="#5E5858"
                       HorizontalAlignment="Right"
               CornerRadius="8"
               Content="Export"
               Icon="Print28"
               IconFilled="True"
               FontSize="16"
               FontWeight="Bold"
               Margin="10,0,0,0" />



                    </Grid>
                </Border>
                
            <Grid Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="2">
                    <TextBlock
     Margin="30,15,0,0"
     Text="Reservation Stats" 
     FontSize="22" 
     Panel.ZIndex="2" 
      Foreground="#373434"
     FontWeight="Bold" />
                    <wpf:CartesianChart 
                        Margin="0,20,0,0"
                        Height="200" Series="{Binding SeriesCollection}"
                                >
                    <wpf:CartesianChart.AxisX>
                        <wpf:Axis  Labels="{Binding Labels}"></wpf:Axis>


                    </wpf:CartesianChart.AxisX>
                    <wpf:CartesianChart.AxisY>
                        <wpf:Axis Title="Number booking"/>
                    </wpf:CartesianChart.AxisY>

                </wpf:CartesianChart>
            </Grid>
            


        </Grid>
            </ScrollViewer>
        </Grid>

</UserControl>
